installCRDs: true

server:
  extraArgs:
    - --insecure

  config:
    url: https://argocd.glados.thorstensauter.dev
    oidc.config: |
      name: Azure
      issuer: https://login.microsoftonline.com/ffab38df-cddf-433f-859a-6cfa161a5ceb/v2.0
      clientID: c5749e21-b7de-4937-8a96-8956493381aa
      clientSecret: $oidc.azure.clientSecret
      requestedIDTokenClaims:
         groups:
            essential: true
      requestedScopes:
         - openid
         - profile
         - email

  rbac:
    policy.default: role:readonly
    policy.csv: |
      p, role:org-admin, applications, *, */*, allow
      p, role:org-admin, clusters, get, *, allow
      p, role:org-admin, repositories, get, *, allow
      p, role:org-admin, repositories, create, *, allow
      p, role:org-admin, repositories, update, *, allow
      p, role:org-admin, repositories, delete, *, allow
      g, "b6a3cbf9-3742-47d3-9a72-1ee3fdeb71ee", role:org-admin
